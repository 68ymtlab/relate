{% extends "course/course-base.html" %}

{% load crispy_forms_tags %}

{% block content %}
  <h1>{{flow.title}}</h1>

  {% if flow.description %}
  {{flow.description_html|safe}}
  {% endif %}

  <h1>{{ title|safe }}</h1>

  {{ body|safe }}

  {% if form %}
    {% crispy form %}
  {% endif %}

  <form
    action="{% url "course.views.view_flow_page" course.identifier flow_identifier page_data.ordinal %}"
    method="POST">

    {% csrf_token %}

    <div class="well flow-well">
      {% if page_data.ordinal > 0 %}
        <a class="btn btn-default"
          href="{% url "course.views.view_flow_page" course.identifier flow_identifier page_data.previous_ordinal %}"
          role="button">&laquo; Previous</a>
      {% endif %}
      {{ page_data.next_ordinal }} / {{ flow_visit.page_count }}
      {% if page_data.next_ordinal < flow_visit.page_count %}
        <a class="btn btn-default"
          href="{% url "course.views.view_flow_page" course.identifier flow_identifier page_data.next_ordinal %}"
          role="button">Next &raquo;</a>
      {% else %}
        <button type="submit" name="finish" class="btn btn-primary">Finish &raquo;</button>
      {% endif %}

    </div>
  </form>

{% endblock %}
