{% extends "base.html" %}
{% load i18n %}

{% load crispy_forms_tags %}

{% block title %}
  {% trans "Manage Authentication Tokens" %}: - {% trans "RELATE" %}
{% endblock %}

{% block content %}
  <h1>{% trans "Manage Authentication Tokens" %}</h1>

  {{ new_token_message }}

  {% if not tokens %}
    {% trans "(No tokens have been created yet.)" %}
  {% else %}
    <form method="POST">
    <table class="table table-condensed">
      <thead>
        <th>{% trans "Token ID" %}</th>
        <th>{% trans "Role Restriction" %}</th>
        <th>{% trans "Description" %}</th>
        <th>{% trans "Created" %}</th>
        <th>{% trans "Valid until" %}</th>
        <th>{% trans "Last used" %}</th>
        <th>{% trans "Actions" %}</th>
      </thead>
      <tbody>
        {% for token in tokens %}
          <tr>
            <td>{{ token.id }}</td>
            <td>{{ token.restrict_to_participation_role }}}</td>
            <td>{{ token.description}}</td>
            <td>{{ token.creation_time }}</td>
            <td>{{ token.valid_until }}</td>
            <td>{{ token.last_used }}</td>
            <td>
              <button class="btn btn-danger" id="revoke_{{ token.id }}">
                Revoke
              </button>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}

  <div class="well">
    {% crispy form %}
  </div>
{% endblock %}
